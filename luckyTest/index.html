<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <title>Egret - HTML5 landing page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/linea-icon.css" />
    <link rel="stylesheet" href="css/fancy-buttons.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="stylesheet" id="scheme-source" href="css/schemes/gray.css" />
</head>
<body>
    <div id="header" class="header-section">
        <div id="section-home" class="home-section-wrap center">
            <div class="section-overlay"></div>
            <div class="container home">
                <div class="row">
                    <h1 class="well-come">趋 吉 避 凶</h1>
                    <div class="col-md-8 col-md-offset-2">
                        <p class="intro-message">Ji Xiong is just there!</p>
                        <div class="home-buttons">
                            <input class="fancy-button button-line button-white vertical" name="suan1" type="submit" id="suan1" value="一日一卦" />
                            <input class="fancy-button button-line button-white vertical" name="suan2" type="submit" id="suan2" value="一日多占" />
                        </div>
                    </div>
                </div>
                <div id="resultSingle" style="display: none;">
                    <h2>一日一占结果：</h2>
                    <p id="resultTextSingle"></p>
                </div>
                <div id="resultMultiple" style="display: none;">
                    <h2>一日多占结果：</h2>
                    <p id="resultTextMultiple"></p>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            console.log("Iframe DOM is ready");

            // 单次占卜按钮
            const singleButton = document.getElementById("suan1");
            if (singleButton) {
                singleButton.addEventListener("click", function () {
                    console.log("Single divination button clicked");
                    window.parent.postMessage({ event: "buttonClick", data: "single" }, "*");
                });
            }

            // 多次占卜按钮
            const multipleButton = document.getElementById("suan2");
            if (multipleButton) {
                multipleButton.addEventListener("click", function () {
                    console.log("Multiple divination button clicked");
                    window.parent.postMessage({ event: "buttonClick", data: "multiple" }, "*");
                });
            }

            // 监听来自父页面的消息
            window.addEventListener("message", function (event) {
    console.log("Iframe received event:", event.data);

    if (event.data.event === "execFunction") {
        const resultType = event.data.data;
         console.log("Iframe received event resultType:", resultType);
        // 调用相应的函数
        if (resultType === "single") {
            calculateJiXiong("single");
            console.log("Iframe executed event resultType:", resultType);
        } else if (resultType === "multiple") {
            calculateJiXiong("multiple");
            console.log("Iframe executed event resultType:", resultType);
        } else {
            console.log("Unknown result type:", resultType);
        }
    } else {
        console.log("Unknown event received:", event.data);
    }
});

        });
    </script>
    <script type="text/javascript" src="js/qigua.js"></script>
</body>
</html>
